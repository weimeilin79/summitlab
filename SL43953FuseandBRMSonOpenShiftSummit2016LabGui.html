<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=pYEwJuzr3ZMDX2Y1syVbvx06if6osnyAslCuLPPf50A');ul.lst-kix_ng7vc0hwpzvu-2{list-style-type:none}ul.lst-kix_ng7vc0hwpzvu-3{list-style-type:none}.lst-kix_mnrel6ahq5m0-4>li:before{content:"\0025cb  "}ul.lst-kix_ng7vc0hwpzvu-0{list-style-type:none}ul.lst-kix_ng7vc0hwpzvu-1{list-style-type:none}.lst-kix_ng7vc0hwpzvu-5>li:before{content:"\0025a0  "}ul.lst-kix_ng7vc0hwpzvu-6{list-style-type:none}ul.lst-kix_ng7vc0hwpzvu-7{list-style-type:none}.lst-kix_mnrel6ahq5m0-5>li:before{content:"\0025a0  "}.lst-kix_mnrel6ahq5m0-6>li:before{content:"\0025cf  "}ul.lst-kix_ng7vc0hwpzvu-4{list-style-type:none}ul.lst-kix_ng7vc0hwpzvu-5{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-0{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-1{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-2{list-style-type:none}.lst-kix_mnrel6ahq5m0-3>li:before{content:"\0025cf  "}.lst-kix_mnrel6ahq5m0-7>li:before{content:"\0025cb  "}.lst-kix_ng7vc0hwpzvu-6>li:before{content:"\0025cf  "}ul.lst-kix_ng7vc0hwpzvu-8{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-3{list-style-type:none}.lst-kix_ng7vc0hwpzvu-2>li:before{content:"\0025a0  "}ul.lst-kix_mnrel6ahq5m0-4{list-style-type:none}.lst-kix_mnrel6ahq5m0-1>li:before{content:"\0025cb  "}.lst-kix_mnrel6ahq5m0-2>li:before{content:"\0025a0  "}.lst-kix_ng7vc0hwpzvu-1>li:before{content:"\0025cb  "}.lst-kix_ng7vc0hwpzvu-7>li:before{content:"\0025cb  "}.lst-kix_mnrel6ahq5m0-0>li:before{content:"\0025cf  "}.lst-kix_mnrel6ahq5m0-8>li:before{content:"\0025a0  "}.lst-kix_ng7vc0hwpzvu-8>li:before{content:"\0025a0  "}.lst-kix_ng7vc0hwpzvu-0>li:before{content:"\0025cf  "}ul.lst-kix_mnrel6ahq5m0-5{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-6{list-style-type:none}ul.lst-kix_mnrel6ahq5m0-7{list-style-type:none}.lst-kix_ng7vc0hwpzvu-3>li:before{content:"\0025cf  "}ul.lst-kix_mnrel6ahq5m0-8{list-style-type:none}.lst-kix_ng7vc0hwpzvu-4>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c5{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:255pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:196.5pt;border-top-color:#000000;border-bottom-style:solid}.c12{color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c23{font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c16{border-spacing:0;border-collapse:collapse;margin-right:auto}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c25{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c3{background-color:#ffffff;font-size:10pt;color:#262626}.c32{background-color:#ffffff;max-width:453.6pt;padding:72pt 72pt 72pt 86.4pt}.c1{orphans:2;widows:2;height:11pt}.c0{color:inherit;text-decoration:inherit}.c8{background-color:#ffffff;font-size:10pt}.c2{orphans:2;widows:2}.c19{margin-left:36pt;padding-left:0pt}.c15{font-size:12pt;color:#666666}.c30{padding:0;margin:0}.c34{margin-left:72pt;padding-left:0pt}.c17{color:#1155cc;text-decoration:underline}.c6{color:#0b5394;font-family:"Consolas"}.c18{font-size:16pt}.c29{height:20pt}.c14{font-family:"Consolas"}.c28{text-align:right}.c35{text-decoration:underline}.c21{page-break-after:avoid}.c36{text-align:left}.c9{font-style:italic}.c4{font-weight:bold}.c26{background-color:#efefef}.c31{font-size:12pt}.c24{color:#ff0000}.c33{color:#0b5394}.c20{color:#666666}.c11{text-indent:36pt}.c22{text-align:center}.c27{height:16pt}.c10{height:0pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c32"><div><p class="c2 c36"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(6.28rad) translateZ(0px); -webkit-transform: rotate(6.28rad) translateZ(0px); width: 98.52px; height: 450.50px;"><img alt="341-rh-summit-middleware-100pct-201605cs-pms-01.jpg" src="images/image24.jpg" style="width: 98.52px; height: 450.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></div><h2 class="c2 c21" id="h.ioqdkkbsxpsv"><span>Presenters</span></h2><p class="c2"><span>Christina Lin, Technology Evangelist, JBoss Middleware</span></p><p class="c2"><span>Siamak Sadeghianfar, Product Marketing Manager, OpenShift</span></p><p class="c2"><span>Eric D. Schabell, Technology Evangelist, Integrated Solutions)</span></p><h2 class="c2 c21" id="h.atn3z6y3vmlk"><span>Abstract</span></h2><p class="c2"><span>Cloud computing must handle a multitude of business events from many different devices. It must process, analyze, and react to the ever-changing business world. Red Hat JBoss A-MQ provides many common protocols to connect business events to devices, but business information without the ability to filter for effective customer responses, to detect meaningful behavior, and to react in a timely manner will cripple our customer relationships. Red Hat JBoss BRMS and Red Hat JBoss Fuse go beyond connecting and collecting events and use business rules to determine which events require action to enhance the customer experience. Join this hands-on session to: - Create asynchronous, event-driven integration between services using JBoss A-MQ - Create rules to to analyze business events with JBoss BRMS - Integrate rules, messages, and events with enterprise integration patterns (EIP) using JBoss Fuse - Deploy a multi-container microservices application on OpenShift by Red Hat</span></p><h1 class="c2 c29 c21" id="h.dlu9fl60o4n6"><span></span></h1><hr style="page-break-before:always;display:none;"><h1 class="c2 c29 c21" id="h.5j8la4fo93c4"><span></span></h1><h1 class="c2 c21" id="h.y0o6xijg9gus"><span>OpenShift Container Platform</span></h1><p class="c2"><span>The basic units of OpenShift applications are called </span><span class="c9">containers</span><span>. Linux containers provide a lightweight mechanism for isolating running processes so that they interact only with their designated resources. Many application instances can be running in containers on a single host without visibility into each other&rsquo;s processes, files, network, and other resources. Typically, each container provides a single service, often called a microservice. OpenShift leverages the Kubernetes concept of a </span><span class="c9">pod</span><span>. A pod is a collection of one or more containers deployed together on one host, and the smallest compute unit that can be defined, deployed, and managed. </span></p><p class="c1"><span></span></p><p class="c2"><span>An OpenShift </span><span class="c9">service</span><span>&nbsp;acts as an internal load balancer. It identifies a set of replicated pods in order to proxy the connections it receives to them. Backing pods can be added to or removed from a service arbitrarily while the service remains available, enabling anything that depends on the service to refer to it at a consistent internal address. Services are assigned an IP address and port pair that, when accessed, proxy to an appropriate backing pod.</span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 562.46px; height: 297.50px;"><img alt="marketecture.png" src="images/image18.png" style="width: 562.46px; height: 297.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21 c27" id="h.pabbhwfqi01e"><span></span></h2><h2 class="c2 c21" id="h.ylfvnqcfry6w"><span>OpenShift Concepts</span></h2><p class="c2"><span class="c3 c4">Container:</span><span class="c3">&nbsp;Lightweight mechanisms for isolating running processes</span></p><p class="c2"><span class="c3 c4">Image:</span><span class="c3">&nbsp;A binary that includes all of the requirements for running a single container, as well as metadata describing its needs and capabilities. </span></p><p class="c2"><span class="c3 c4">Pod: </span><span class="c3">A small group of tightly coupled Containers sharing network, storage, etc</span></p><p class="c2"><span class="c3 c4">Service:</span><span class="c3">&nbsp;A set of replicated pods that work together</span></p><p class="c2"><span class="c3 c4">Build:</span><span class="c3">&nbsp;Process of transforming a set of parameters and source code into a runnable image</span></p><p class="c2"><span class="c3 c4">Route:</span><span class="c3">&nbsp;A route is a way to expose a service by giving it an externally-reachable hostname like </span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://www.example.com&amp;sa=D&amp;ust=1467308642168000&amp;usg=AFQjCNHF6H170c0yGffb9kDTfsYDQSDKhA">www.example.com</a></span></p><p class="c2"><span class="c3 c4">Template:</span><span class="c3">&nbsp;Describes a set of objects that can be parameterized and processed to produce a list of objects for creation by OpenShift</span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.xpfzqeh0k5ln"><span>OpenShift Lab Environment</span></h2><p class="c2"><span class="c3">OpenShift URL: </span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=https://openshift.labs.summit2016.openshift.com&amp;sa=D&amp;ust=1467308642170000&amp;usg=AFQjCNFYdq5poKKLHeVkxyGSx5RelOWu_g">https://openshift.labs.summit2016.openshift.com</a></span></p><p class="c2"><span class="c3">Gogs Git Server: </span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://gogs-cicd.apps.labs.summit2016.openshift.com/&amp;sa=D&amp;ust=1467308642170000&amp;usg=AFQjCNHNhNnrh8He_d9Ixzc-mQ1hwfJwzQ">http://gogs-cicd.apps.labs.summit2016.openshift.com</a></span></p><p class="c2"><span class="c3">Username/password: provided during the session (valid for OpenShift and Gogs)</span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.lhk1gia8zwae"><span>Lab 1 - Creating Applications on OpenShift</span></h2><p class="c2"><span class="c3">In this lab, you will deploy the JBoss EAP reference application on OpenShift by using </span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=https://docs.openshift.com/enterprise/3.2/architecture/core_concepts/builds_and_image_streams.html%23source-build&amp;sa=D&amp;ust=1467308642171000&amp;usg=AFQjCNEx0JwYsVaUG7KlcQWWS6Q7nJskug">Source-To-Image</a></span><span class="c3">&nbsp;(S2I) feature. S2I is for building reproducible ready-to-run Docker images by injecting application source into a Docker image and assembling a new Docker image that can be deployed immediately.</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Point your browser at the OpenShift Web Console and login with the given username and password. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 365.33px;"><img alt="" src="images/image20.png" style="width: 604.80px; height: 365.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 214.67px;"><img alt="" src="images/image32.png" style="width: 604.80px; height: 214.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">Click on </span><span class="c3 c9">Smoke Test</span><span class="c3">&nbsp;project and explore the running container. Click on </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 33.00px; height: 33.00px;"><img alt="" src="images/image05.png" style="width: 33.00px; height: 33.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c3">&nbsp;on the left top corner to go the list of projects. Create a new project and name it </span><span class="c3 c9">userXX-lab1</span><span class="c3">&nbsp;where </span><span class="c3 c9">userXX</span><span class="c3">&nbsp;is the username given to you e.g. user12-lab1</span></p><p class="c1"><span class="c3"></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 570.30px; height: 263.00px;"><img alt="" src="images/image42.png" style="width: 570.30px; height: 263.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">OpenShift takes you to the list of images, templates and quickstarts that are configured on the platform. Pick</span><span class="c3 c9">&nbsp;jboss-eap64-openshift:1.3</span><span class="c3">&nbsp;from the list. You can filter the list by entering </span><span class="c3 c9">eap</span><span class="c3">&nbsp;in the textbox. </span><span class="c3">This template uses S2I for building and packaging a Maven-based Java application and deploy it onto JBoss EAP 6.4. Click on </span><span class="c3 c9">Show advanced routing, build, and deployment options</span><span class="c3">&nbsp;and and the following:<br></span></p><p class="c2"><span class="c3 c4">Name:</span><span class="c3">&nbsp;ticketmonster</span></p><p class="c2"><span class="c3 c4">Git Repository URL:</span><span class="c3">&nbsp;https://github.com/jboss-developer/ticket-monster.git<br></span><span class="c3 c4">Git Reference:</span><span class="c3">&nbsp;2.7.0.Final</span></p><p class="c2"><span class="c3 c4">Context Dir:</span><span class="c3">&nbsp;demo<br></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 565.30px; height: 339.18px;"><img alt="" src="images/image10.png" style="width: 565.30px; height: 339.18px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c3 c9">Git <br></span></p><p class="c2"><span class="c3 c9">Repository</span><span class="c3">&nbsp;refers to repo where the application source code is stored. </span><span class="c3 c9">Git Reference</span><span class="c3">&nbsp;is the Git branch you want to build and </span><span class="c3 c9">Context Dir</span><span class="c3">&nbsp;specifies the sub-directory that contains the application code in the given Git repository. Other parameters on the page allows you to specify number of containers to run, set environment variables, limit amount of CPU and Memory allocated to the application container, etc. Click on </span><span class="c3 c9">Create</span><span class="c3">&nbsp;to build and deploy the application.</span></p><p class="c1"><span class="c3"></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 605.00px; height: 278.00px;"><img alt="" src="images/image00.png" style="width: 605.00px; height: 313.00px; margin-left: 0.00px; margin-top: -35.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Click on </span><span class="c3 c9">View Log</span><span class="c3">&nbsp;to see the build logs as OpenShift runs the Maven build and creates a new Docker image based on the application code. Although OpenShift makes it possible to SSH into the container, it enables viewing logs and running commands inside the container, without the need </span><span class="c3">to</span><span class="c3">&nbsp;SSH into your container.</span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 561.00px; height: 333.00px;"><img alt="" src="images/image29.png" style="width: 561.00px; height: 365.00px; margin-left: 0.00px; margin-top: -32.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span></span></p><p class="c2"><span>When build completes, the application Docker image gets deployed on OpenShift and automatically gets a DNS entry to be able to access it with a URL. Click on the application URL to verify the application is deployed successfully.</span></p><p class="c1"><span></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 560.30px; height: 256.53px;"><img alt="" src="images/image36.png" style="width: 560.30px; height: 288.95px; margin-left: 0.00px; margin-top: -32.41px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 641.33px;"><img alt="Ticket Monster.png" src="images/image25.png" style="width: 604.80px; height: 641.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c2"><span>Go back to OpenShift Web Console and click on the blue circle and then the pod name. Under the </span><span class="c9">Metric</span><span>&nbsp;tab you can monitor the deployed container&rsquo;s memory and CPU usage over time.<br><br></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 418.67px;"><img alt="" src="images/image01.png" style="width: 604.80px; height: 418.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span></span></p><p class="c2"><span>Congratulations! You have deployed your first Dockerized application on OpenShift.</span></p><p class="c1"><span></span></p><h2 class="c2 c21" id="h.ejvd0mu27qxw"><span>Lab 2 - OpenShift CLI</span></h2><p class="c1"><span></span></p><p class="c2"><span>In this lab, you will use OpenShift Command-Line-Interface to interact with OpenShift. OpenShift CLI is already installed on your workstation however for see instructions on how to access OpenShift CLI, check out the </span><span class="c9">About</span><span>&nbsp;page by clicking on </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 32.67px; height: 24.50px;"><img alt="" src="images/image30.png" style="width: 32.67px; height: 24.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span>&nbsp;on the top right corner.</span></p><p class="c1"><span></span></p><p class="c1 c22"><span></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 360.00px;"><img alt="" src="images/image22.png" style="width: 604.80px; height: 360.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c22"><span></span></p><p class="c2"><span>You can login to OpenShift through CLI by using the access token as described on the About page. Alternatively you can use your username and password to log in:</span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c2"><span class="c6">$ oc login </span><span class="c6 c35"><a class="c0" href="https://www.google.com/url?q=https://openshift.labs.summit2016.openshift.com&amp;sa=D&amp;ust=1467308642182000&amp;usg=AFQjCNGOXe9-Z_lgOz9grC-ERs0MAy_0zg">https://openshift.labs.summit2016.openshift.com</a></span><span class="c6"><br></span></p><p class="c2"><span class="c6">Authentication required for https://openshift.labs.summit2016.openshift.com:443 (openshift)</span></p><p class="c2"><span class="c6">Username: userXX </span></p><p class="c2"><span class="c6">Password:</span></p><p class="c2"><span class="c6">Login successful.</span></p><p class="c1"><span class="c6"></span></p><p class="c2"><span class="c6">You have access to the following projects and can switch between them with &#39;oc project &lt;projectname&gt;&#39;:</span></p><p class="c1"><span class="c6"></span></p><p class="c2"><span class="c6">&nbsp; * user00-lab1 (current)</span></p><p class="c2"><span class="c6">&nbsp; * user00-smoke</span></p><p class="c1"><span class="c14"></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c2"><span>Explore various objects in your project using the </span><span class="c9">oc</span><span>&nbsp;commands. </span></p><p class="c1"><span></span></p><a id="t.a4d77929c529c20f3c1a7a1e44d867b31f17bea0"></a><a id="t.0"></a><table class="c16"><tbody><tr class="c10"><td class="c13 c26" colspan="1" rowspan="1"><p class="c25"><span class="c12">CLI Command</span></p></td><td class="c5 c26" colspan="1" rowspan="1"><p class="c25"><span class="c12">Description</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c7 c2"><span class="c6">oc get projects</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">List projects</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c7 c2"><span class="c6 c23">oc project [project-name]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">Change active project to the specified project</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c7 c2"><span class="c23 c6">oc new-project [project-name]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">Create a new project</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c7 c2"><span class="c6">oc get pods</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">List deployed pods</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c7 c2"><span class="c6">oc rsh [pod-name]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">Remote SSH into the specified container</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c2 c7"><span class="c6">oc logs [pod-name]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">View logs for the specified container</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c25"><span class="c23 c6">oc port-forward -p [pod-name] local-port:remote-port</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">Forward 1 or more local ports to a pod</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c25"><span class="c23 c6">oc new-app [template|docker-image|etc]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">Create a new application from a template, docker image, etc</span></p></td></tr><tr class="c10"><td class="c13" colspan="1" rowspan="1"><p class="c25"><span class="c23 c6">oc --help</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c25"><span class="c12">List oc commands</span></p></td></tr></tbody></table><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c2"><span>Let&rsquo;s create a new project and deploy a Docker image that is available on Docker Hub through OpenShift CLI commands. We can use the Kubernetes Guestbook application for this purpose:</span></p><p class="c2"><span class="c17"><a class="c0" href="https://www.google.com/url?q=https://hub.docker.com/r/kubernetes/guestbook/&amp;sa=D&amp;ust=1467308642193000&amp;usg=AFQjCNGxmn-FpKKU07zRzGmT7WEwOkNipw">https://hub.docker.com/r/kubernetes/guestbook/</a></span></p><p class="c1"><span></span></p><p class="c2"><span class="c6">$ oc new-project userXX-lab2 --display-name=&quot;Lab 2&quot;</span></p><p class="c2"><span class="c6">$ oc new-app kubernetes/guestbook</span></p><p class="c1"><span class="c6"></span></p><p class="c2"><span>Replace userXX with your own username in the above commands. The above command lets OpenShift to download the </span><span class="c9">kubernetes/guestbook</span><span>&nbsp;Docker image from Docker Hub and deploy it into a container running on OpenShift. Verified the guestbook container is up and running.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c6">$ oc get pods<br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;READY &nbsp; &nbsp; STATUS &nbsp; &nbsp;RESTARTS &nbsp; AGE</span></p><p class="c2"><span class="c6">guestbook-1-ysja4 &nbsp; 1/1 &nbsp; &nbsp; &nbsp; Running &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;55s</span></p><p class="c1"><span class="c6"></span></p><p class="c2"><span class="c6">$ oc get svc<br>NAME &nbsp; &nbsp; &nbsp; &nbsp;CLUSTER-IP &nbsp; &nbsp; &nbsp;EXTERNAL-IP &nbsp; PORT(S) &nbsp; &nbsp;AGE</span></p><p class="c2"><span class="c6">guestbook &nbsp; 172.30.179.80 &nbsp; &lt;none&gt; &nbsp; &nbsp; &nbsp; &nbsp;3000/TCP &nbsp; 2m</span></p><p class="c2"><span>An OpenShift </span><span class="c9">service</span><span>&nbsp;is created that routes traffic to the deployed </span><span class="c9">guestbook</span><span>&nbsp;container. In order to assign a URL to the </span><span class="c9">service</span><span>&nbsp;and make it accessible from outside, a </span><span class="c9">route</span><span>&nbsp;should be created for the </span><span class="c9">service</span><span>. Create a </span><span class="c9">route</span><span>&nbsp;by exposing the guestbook </span><span class="c9">service</span><span>.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c6">$ oc expose svc guestbook</span></p><p class="c2"><span class="c6">route &quot;guestbook&quot; exposed<br></span></p><p class="c2"><span class="c6">$ oc get route</span></p><p class="c2"><span class="c6">NAME &nbsp; &nbsp; &nbsp; &nbsp;HOST/PORT &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c2"><span class="c6">guestbook &nbsp; guestbook-userXX-lab2.apps.labs.summit2016.openshift.com</span></p><p class="c1"><span class="c6"></span></p><p class="c2"><span>Point your browser at the route URL and verify the guestbook application is running. Note that the url containers your username instead of </span><span class="c9">userXX.</span></p><p class="c1"><span class="c9"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 270.67px;"><img alt="" src="images/image34.png" style="width: 604.80px; height: 270.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c6"></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><p class="c1"><span></span></p><h1 class="c2 c21 c29" id="h.e0n1igt9oj7a"><span></span></h1><h1 class="c2 c21" id="h.i9dmkhm54x15"><span>Real-time weightwatcher on </span><span>JBoss BRMS</span></h1><p class="c1"><span class="c3"></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 354.50px; height: 232.68px;"><img alt="Screen Shot 2016-06-24 at &#19979;&#21320;8.10.52.png" src="images/image21.png" style="width: 354.50px; height: 232.68px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.4enaye9lxhya"><span>Lab 3 - Deploy Business Rules on OpenShift</span></h2><p class="c2"><span class="c3">In this lab, you will s</span><span class="c3">tart and install JBoss BRMS Decision Server on OpenShift. Create a new project for the lab:</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">$ </span><span class="c8 c6">oc new-project userXX-lab3 --display-name=&quot;Lab 3&quot;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Replace </span><span class="c3 c9">userXX</span><span class="c3">&nbsp;with your username in the above command. In terminal go to an empty directory, clone the source project: (OR you may want to fork it if you have an existing account):</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c8 c6">$ </span><span class="c8 c6">git clone https://github.com/weimeilin79/weightwatcherrules.git</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c3">Go to the </span><span class="c3 c9">decisionserver</span><span class="c3">&nbsp;directory under root project which we have just cloned, import the template:</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">$ oc create -f weightwatcher-template.json</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">We are going to create the BRMS Decision Server with OpenShift S2i:</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">$ oc new-app decisionserver62-weightwatcher-s2i --param=KIE_SERVER_PASSWORD=kieserver1!</span><span class="c8 c6">&nbsp;</span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Reference: </span></p><p class="c2"><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=https://github.com/jbossdemocentral/brms-weightwatcher-realtime-decision-server-demo&amp;sa=D&amp;ust=1467308642208000&amp;usg=AFQjCNEMnl0330osyUWd0WYGst3uKehtuQ">https://github.com/jbossdemocentral/brms-weightwatcher-realtime-decision-server-demo</a></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c9 c4 c20">QUESTIONS: What if we want to change the rules the weight watcher?</span></p><h1 class="c2 c21" id="h.n7p4k5cil153"><span>JBoss Fuse </span></h1><p class="c2"><span class="c3">Having all the rules set up and start watching the weight providing advices is good. But we are now in the era of APIs, we want to maximize the use of the rules, creating a simple RESTFul API, it offers benefits such as additional decoupling, and allows extreme scalability. Since REST forbids conversational state, we can scale very wide by utilizing load balancer later on provided automatically by OpenShift. Other advantage such as uniform interface with Basic API operations makes other parties easy to follow. &nbsp;JBoss Fuse is the perfect medium to turn the Business Rules into simple services API, it&rsquo;s built-in interface. </span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 386.50px; height: 310.43px;"><img alt="Screen Shot 2016-06-21 at &#19979;&#21320;2.11.03.png" src="images/image39.png" style="width: 386.50px; height: 310.43px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c3">&nbsp;</span></p><p class="c2"><span class="c3">In our case we will expose two RESTFul Endpoints, one takes in participants data and one receives constant updates of weight and returns the analyzed result back. There are few things we need to do </span></p><p class="c1"><span class="c3"></span></p><ul class="c30 lst-kix_mnrel6ahq5m0-0 start"><li class="c2 c19"><span class="c3">Create an event base system by exposing RESTFul Endpoint using REST DSL with Camel </span></li><li class="c2 c19"><span class="c3">Transform the entered data into JSON format required by BRMS, and then wrap these data in XML which is needed by decision server. </span></li><li class="c2 c19"><span class="c3">Connecting to BRMS decision server with API Call </span></li><li class="c2 c19"><span class="c3">Filter and parse the return response and result back to user. </span></li></ul><p class="c1"><span class="c3"></span></p><h2 class="c2 c21 c27" id="h.k17zg2cqo1h9"><span></span></h2><h2 class="c2 c21 c27" id="h.ghvpf66hrc6c"><span></span></h2><h2 class="c2 c21" id="h.q32rv8exlnw"><span>Lab 4 - </span><span>Importing a Fuse Project into JBoss Developer Studio</span></h2><p class="c2"><span class="c3">We are going to start by importing our Fuse Project in JBoss Developer Studio. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Right click on the</span><span class="c3 c4">&nbsp;Project explorer</span><span class="c3">&nbsp;and select import</span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 330.50px; height: 264.55px;"><img alt="" src="images/image11.png" style="width: 330.50px; height: 264.55px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">Select Git -&gt; </span><span class="c3 c4">Project from Git</span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 306.50px; height: 319.80px;"><img alt="" src="images/image26.png" style="width: 306.50px; height: 319.80px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">Under Select Repository source, select </span><span class="c3 c4">Clone URI</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 189.33px;"><img alt="" src="images/image07.png" style="width: 624.00px; height: 189.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">In Source Git Repository setting, enter </span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://gogs-cicd.apps.labs.summit2016.openshift.com/demo/weightwatcherapi.git&amp;sa=D&amp;ust=1467308642214000&amp;usg=AFQjCNG0aKb2sULZihInAiMYU0pTkvg0JQ">http://gogs-cicd.apps.labs.summit2016.openshift.com/userXX/weightwatcherapi.git</a></span><span class="c3">&nbsp;for </span><span class="c3 c4">URI</span><span class="c3">. Replace </span><span class="c3 c9">userXX</span><span class="c3">&nbsp;with your Gogs username (same as OpenShift username) in the URI.</span></p><p class="c1"><span class="c3 c4"></span></p><p class="c1"><span class="c3 c4"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 374.50px; height: 323.86px;"><img alt="" src="images/image12.png" style="width: 374.50px; height: 323.86px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Select the </span><span class="c3 c4">master</span><span class="c3">&nbsp;branch</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 189.00px;"><img alt="" src="images/image17.png" style="width: 624.00px; height: 536.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">Import the project as existing project, select </span><span class="c3 c4">FuseWeightWatcherAPI</span><span class="c3">&nbsp;project and click </span><span class="c3 c4">Finish</span><span class="c3">&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 431.50px; height: 456.98px;"><img alt="" src="images/image13.png" style="width: 431.50px; height: 456.98px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">You should be able to see the project in your project explorer. (If you see any error, simple right click on the project and click on maven -&gt; Update project, that should update and erase any error)</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 161.33px;"><img alt="" src="images/image37.png" style="width: 624.00px; height: 161.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.n50p1r6eomrr"><span>Lab 5 - </span><span>Exposing a REST API in JBoss Fuse</span></h2><p class="c2"><span class="c3">In the project, you should be able to see two Camel context file, one is responsible for the front end API handling, and the other one is for connecting with BRMS decision server. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Open the first Camel context file under src/main/resources/META-INF/spring/ </span><span class="c3 c4">camel-context-1.xml</span></p><p class="c2"><span class="c3">In the file, you should be able to see a camel route that is already built for you that handles adding a new participant in the system.</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 585.72px; height: 252.50px;"><img alt="" src="images/image23.png" style="width: 585.72px; height: 252.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Using Camel REST DSL we are going to expose two endpoint with port 9191 (base on Jetty) that takes in data in the URL. &nbsp;Go to the </span><span class="c3 c4">Source</span><span class="c3">&nbsp;tab next Design at the bottom of your Camel canvas. This will take you to the actual XML description of the route. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Add the following lines of code in between </span></p><p class="c2"><span class="c8 c33">&lt;camelContext xmlns=&quot;</span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://camel.apache.org/schema/spring&amp;sa=D&amp;ust=1467308642220000&amp;usg=AFQjCNFS8HP9sS70huSr0X-t0aYcHJL39g">http://camel.apache.org/schema/spring</a></span><span class="c8 c33">&quot;&gt; and</span></p><p class="c2"><span class="c8 c33">&lt;route id=&quot;addParticipant&quot;&gt;</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c8 c6">&lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; </span><span class="c8 c6 c9">&lt;restConfiguration component=&quot;jetty&quot; port=&quot;9191&quot; bindingMode=&quot;json&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &lt;rest path=&quot;/weightwatcher&quot;&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &nbsp; &nbsp; &lt;get uri=&quot;/addParticipant/{userid}/{username}/{target}/{start}/{low}/{high}&quot;&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;to uri=&quot;direct:addParticipant&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/get&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;get uri=&quot;/updateweight/{userid}/{obsDate}/{obsvalue}&quot;&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;to uri=&quot;direct:updateweight&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/get&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp; &nbsp;&lt;/rest&gt;</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c8 c6">&lt;route id=&quot;addParticipant&quot;&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">These are very straight forward, exposing API with path /weightwatcher/addParticipant/ and /weightwatcher/updateweright with HTTP method GET. And once we received a request by the endpoint, it is going to call the route starts with either </span><span class="c3 c9">direct:addParticipant</span><span class="c3">&nbsp;or </span><span class="c3 c9">direct:updateweright</span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.v6psupk8jvfw"><span>Lab 6 - </span><span>Transforming Data in JBoss Fuse</span></h2><p class="c2"><span class="c3">As you can see, we not yet implemented the route that takes in the updated weight API call. Go back to the design tab in your camel canvas, find the route that we will work on by select </span><span class="c3 c4">Routes</span><span class="c3">&nbsp;-&gt; &nbsp;</span><span class="c3 c4">Route:updateweight</span></p><p class="c1"><span class="c3 c4"></span></p><p class="c2 c22"><span class="c3 c4">&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 516.00px; height: 229.00px;"><img alt="" src="images/image04.png" style="width: 516.00px; height: 229.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">On the bottom of JBoss Developer Studio, you should be able to locate the properties view in the tab, select it and add </span><span class="c3 c4">updateweight</span><span class="c3">&nbsp;to id column. And should you not see the the tab, simple go to </span><span class="c3 c4">Window</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">Show view</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">Properties</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 292.00px;"><img alt="" src="images/image16.png" style="width: 624.00px; height: 292.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">&nbsp;</span></p><p class="c2"><span class="c3">On the right hand slide of the canvas, you should be able to see a Palette, contains the component you will need to create the route. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Start by drag and drop the component in the canvas, once the component are on the canvas, click on it and select use the properties tab to enter the configuration. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">We are going to start by calling adding the weight into our system by calling a working bean. Drag Bean component into the canvas, in properties view, enter following </span></p><p class="c1"><span class="c3"></span></p><ul class="c30 lst-kix_ng7vc0hwpzvu-0 start"><li class="c2 c34"><span class="c3">Ref &nbsp;</span><span class="c4 c31">&rarr;</span><span class="c4 c15">&nbsp;</span><span class="c3">beanCreator</span></li><li class="c2 c34"><span class="c3">Method </span><span class="c4 c31">&rarr;</span><span class="c3">&nbsp;addObservation(${headers.userid},${headers.obsDate},${headers.obsvalue})</span></li></ul><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 589.86px; height: 371.50px;"><img alt="" src="images/image09.png" style="width: 589.86px; height: 371.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">And link the bean right after direct. If you notice the XML file we to send to the decision server, you will notice the weight data are in JSON format, so we will need to convert the data format too. In the Palette, under </span><span class="c3 c4">Transformation</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">Marshal</span><span class="c3">, drag the component into canvas, link it in between bean and log in the route. Under </span><span class="c3 c4">properties</span><span class="c3">&nbsp;view, unser </span><span class="c3 c4">json</span><span class="c3">&nbsp;select </span><span class="c3 c4">Jackson</span><span class="c3">&nbsp;as library. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Two more beans after log:</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Bean:</span></p><p class="c2"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ref: beanCreator</span></p><p class="c2"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method: setObservationFactJson(${headers.userid},${body})</span></p><p class="c2"><span class="c3">Bean:</span></p><p class="c2"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ref: beanCreator</span></p><p class="c2"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method createSessionContent(${headers.userid})</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">If you go back to see the source tab, you should be able to see the route like this, add </span></p><p class="c2"><span class="c3 c9 c4">&lt;to uri=&quot;</span><span class="c3 c9 c4">amq</span><span class="c3 c9 c4">:queue:WEIGHTWATCHER&quot;/&gt;</span></p><p class="c2"><span class="c3">To the bottom. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">&lt;route id=&quot;updateweight&quot;&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp;&lt;from uri=&quot;direct:updateweight&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;bean ref=&quot;beanCreator&quot;</span><span class="c8 c6">&nbsp;</span><span class="c8 c6">method=&quot;addObservation(${headers.userid},${headers.obsDate},${headers.obsvalue})&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;marshal&gt;</span></p><p class="c2"><span class="c6 c8">&nbsp; &nbsp; &lt;json library=&quot;Jackson&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;/marshal&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;log message=&quot;${body}&quot; /&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;bean ref=&quot;beanCreator&quot; method=&quot;setObservationFactJson(${headers.userid},${body})&quot; /&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;bean ref=&quot;beanCreator&quot; method=&quot;createSessionContent(${headers.userid})&quot; /&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp;&lt;to uri=&quot;amq:queue:WEIGHTWATCHER&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&lt;/route&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">As you can see, we did not immediately process and send the data to BRMS decision server, instead we temporary sends the data into a messaging queue. The reason behind this is that we can decouple the frontend and backend service. Allowing more flexible scalable architecture. As well as having a medium that controls the traffic going into decision server. &nbsp;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c9 c4 c20">QUESTIONS: How does Camel create the content in the format that BRMS decision server needs? What is BeanCreator do?</span></p><h2 class="c2 c21" id="h.88ygzka5gtva"><span>Connecting to BRMS </span></h2><p class="c2"><span class="c3">OK, now we can open the second Camel context file, locate under src/main/resources/META-INF/spring/ </span><span class="c3 c4">camel-context-2.xml. </span><span class="c3">In section, we are going establish API calls to Decision server, with the CXF client. </span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 208.00px;"><img alt="" src="images/image02.png" style="width: 624.00px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">To setup , add the following settings to your 2nd camel context file. &nbsp;It should be right under &nbsp;&lt;beans&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br> &nbsp; &nbsp; &nbsp; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br> &nbsp; &nbsp; &nbsp; xmlns:cxf=&quot;http://camel.apache.org/schema/cxf&quot;<br> &nbsp; &nbsp; &nbsp; xsi:schemaLocation=&quot;<br> &nbsp; &nbsp; &nbsp; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<br> &nbsp; &nbsp; &nbsp; http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd<br> &nbsp; &nbsp; &nbsp; http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd&quot;&gt;<br></span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span class="c8 c6 c9">&lt;cxf:rsClient id=&quot;rsClient&quot;</span><span class="c8 c6 c9">&nbsp;</span><span class="c8 c6 c9">address=&quot;http://IP:8080/kie-server/services/rest/server/containers/instances/containerweightwatchers10&quot;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;serviceClass=&quot;org.blogdemo.endpoint.CustEval&quot;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;username=&quot;kieserver&quot;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;password=&quot;kieserver1!&quot;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;loggingFeatureEnabled=&quot;true&quot; &gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:providers&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean class=&quot;org.apache.cxf.jaxrs.provider.JAXBElementProvider&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/cxf:providers&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:headers&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:entry key=&quot;Http-Method&quot; value=&quot;POST&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:entry key=&quot;Charset&quot; value=&quot;UTF-8&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:entry key=&quot;Content-Type&quot; value=&quot;application/xml&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;cxf:entry key=&quot;X-KIE-ContentType&quot; value=&quot;xstream&quot;/&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/cxf:headers&gt;</span></p><p class="c2"><span class="c8 c6 c9">&nbsp; &nbsp;&lt;/cxf:rsClient&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Note: the IP is where you deploy your BRMS decision server. There are couple of things to note here, you can see we are using JAXB to parse the content into XML if needed, and the basic authentication of the client are also set as well. Notice the KEY for calling BRMS server is that you must have </span><span class="c3 c9">X-KIE-ContentType </span><span class="c3">assigned in the header.</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 238.67px;"><img alt="" src="images/image41.png" style="width: 604.80px; height: 238.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">We are now ready for the call to BRMS Server, go back to the canvas, you will notice the route was incomplete, it gets the data from messaging queue, so now we need to send it out, go to the canvas in the </span><span class="c3 c4">Design</span><span class="c3">&nbsp;tab. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Select </span><span class="c3 c4">multicast</span><span class="c3">&nbsp;from right Palette under </span><span class="c3 c4">Routing</span><span class="c3">. And under </span><span class="c3 c4">Components</span><span class="c3">&nbsp;drag </span><span class="c3 c4">Generic</span><span class="c3">&nbsp;to the right hand canvas. And in the properties tab of Generic , in uri enter :</span></p><p class="c1"><span class="c3"></span></p><p class="c2 c11"><span class="c3 c9">cxfrs:bean:rsClient?exchangePattern=InOut</span><span class="c3 c9">&nbsp;</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 261.33px;"><img alt="" src="images/image35.png" style="width: 624.00px; height: 261.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Last but not least, add a Generic component at the end with uri </span></p><p class="c2 c11"><span class="c3 c9">direct:parsedata</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Make sure your Camel route look like this: </span></p><p class="c2"><span class="c3">&nbsp; &nbsp;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp;&lt;route id=&quot;input&quot;&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;from uri=&quot;amq:queue:WEIGHTWATCHER&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;log message=&quot;The message from QUEUE ${body}&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;setHeader headerName=&quot;CamelHttpMethod&quot;&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp;&lt;constant&gt;POST&lt;/constant&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp;&lt;/setHeader&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp;&lt;setHeader headerName=&quot;CamelHttpPath&quot;&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;constant&gt;/&lt;/constant&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;/setHeader&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;multicast&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;to uri=&quot;cxfrs:bean:rsClient?exchangePattern=InOut&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;/multicast&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;to uri=&quot;direct:parsedata&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp;&lt;/route&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c9 c4 c20">QUESTIONS: How do we make sure the BRMS Decision server understands what format we are using? How do we login to it?</span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.23bv395cgj4v"><span>Parsing Result</span></h2><p class="c2"><span class="c3">Once BRMS Decision server returns the process result back, it is in the XML form and believe it&rsquo;s hard to read, to be nice to the other system, we are going to parse the response and return only the essence, which is the calculated result by weight watcher. </span></p><p class="c2"><span class="c3">Find the route that we will work on by select </span><span class="c3 c4">Routes</span><span class="c3">&nbsp;-&gt; &nbsp;</span><span class="c3 c4">Route:parsedata</span></p><p class="c1"><span class="c3 c4"></span></p><p class="c2"><span class="c3">Camel has a lot of interesting data transformation libraries, this time we are going to use XPath to parse the return content. First we need to turn the xml string response into actual XML object, in right-hand Palette, choose </span><span class="c3 c4">Transformation</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">convertBody</span><span class="c3">&nbsp;and place it in canvas and connect after the last component. In the properties view, &nbsp;in type add: </span></p><p class="c2 c11"><span class="c3 c9">&nbsp;</span><span class="c3 c9">org.w3c.dom.Document</span></p><p class="c1 c11"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 294.67px;"><img alt="" src="images/image40.png" style="width: 624.00px; height: 294.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Drag </span><span class="c3 c4">Routing</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">Choice</span><span class="c3">&nbsp;to canvas and link it with direct:parsedata </span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 229.33px;"><img alt="" src="images/image28.png" style="width: 624.00px; height: 229.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Add </span><span class="c3 c4">Routing</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">When</span><span class="c3">&nbsp; and </span><span class="c3 c4">Routing</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">otherwise</span><span class="c3">&nbsp;to canvas and connect both to choice</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 306.67px;"><img alt="" src="images/image03.png" style="width: 624.00px; height: 306.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">To only parse the data when the process of BRMS is successful, we are need to check the status from the response first. Select </span><span class="c3 c4">when</span><span class="c3">, in the properties view, set</span></p><p class="c2 c11"><span class="c3">Language : xpath </span></p><p class="c2 c11"><span class="c3">Expression: /org.kie.server.api.model.ServiceResponse/type = &#39;SUCCESS&#39;</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 301.33px;"><img alt="" src="images/image06.png" style="width: 624.00px; height: 301.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">When successful, we will parse the data and store them in a temporary header, drag three </span><span class="c3 c4">setBody </span><span class="c3">under </span><span class="c3 c4">Transformation</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">And put it together in the body by adding </span><span class="c3 c4">Transformation </span><span class="c3">-&gt; </span><span class="c3 c4">setBody</span><span class="c3">&nbsp;and link it to the last setHeader</span></p><p class="c2 c11"><span class="c3">Language : </span><span class="c8 c24">xpath</span><span class="c3">&nbsp;</span></p><p class="c2 c11"><span class="c3">Expression: /org.kie.server.api.model.ServiceResponse/result/text()</span></p><p class="c1 c11"><span class="c3"></span></p><p class="c1 c11"><span class="c3"></span></p><p class="c2"><span class="c3">And convert the extract body into string by choose </span><span class="c3 c4">Transformation</span><span class="c3">&nbsp;-&gt; </span><span class="c3 c4">convertBody </span><span class="c3">place it in canvas and connect after the last component. In the properties view, &nbsp;in type add: </span></p><p class="c2 c11"><span class="c3 c9">&nbsp;java.lang.String</span></p><p class="c1"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">We also need to return a message if it failed.</span><span class="c8 c24">After </span><span class="c8 c4 c24">otherwise</span><span class="c8 c24">, </span><span class="c3">add </span><span class="c3 c4">Transformation </span><span class="c3">-&gt; </span><span class="c3 c4">setBody</span><span class="c3">&nbsp;</span></p><p class="c2 c11"><span class="c3">Language : </span><span class="c8 c24">constant</span><span class="c3">&nbsp;</span></p><p class="c2 c11"><span class="c3">Expression: Nothing matches!!!!!!</span></p><p class="c1 c11"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 221.33px;"><img alt="" src="images/image38.png" style="width: 604.80px; height: 221.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">This is what your route should look like:<br></span></p><p class="c2"><span class="c8 c6">&lt;route id=&quot;parsedata&quot;&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;from uri=&quot;direct:parsedata&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;convertBodyTo type=&quot;org.w3c.dom.Document&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;choice&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;when&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;xpath&gt;/org.kie.server.api.model.ServiceResponse/type = &#39;SUCCESS&#39;&lt;/xpath&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;setBody&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xpath&gt;/org.kie.server.api.model.ServiceResponse/result/text()&lt;/xpath&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/setBody&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;/when&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;otherwise&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;setBody&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;constant&gt;Nothing matches!!!!!!&lt;/constant&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/setBody&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &nbsp; &lt;/otherwise&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &nbsp; &lt;/choice&gt;</span></p><p class="c2"><span class="c8 c6">&nbsp; &lt;/route&gt;</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Please commit your change back up to your repository by select Team -&gt; Commit , and add Commit message, and check all the files and push &ldquo;Commit and Push&rdquo;. </span></p><p class="c1"><span class="c3"></span></p><h2 class="c2 c21" id="h.7nzwvbdk66r3"><span>Lab 7 - Deploying JBoss Fuse and Message Server on OpenShift</span></h2><p class="c1"><span class="c3"></span></p><p class="c2"><span>In this lab you will deploy a JBoss Fuse and a Message Server (JBoss A-MQ) container on OpenShift. Go into the support folder, there you will find all the template you need to build your application</span></p><p class="c1"><span></span></p><p class="c2"><span>Create a new project and deploy the Message Server:</span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">$ oc new-app amq62-basic --param=MQ_PROTOCOL=openwire</span></p><p class="c1"><span></span></p><p class="c2 c22"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 428.00px;"><img alt="" src="images/image15.png" style="width: 604.80px; height: 428.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c6">$ oc new-app -f </span><span class="c8 c6">fusetemplate.json</span><span class="c8 c6">&nbsp;--param=GIT_REPO=https://github.com/jbossdemocentral/summitlab2016</span></p><p class="c1 c11"><span class="c3"></span></p><p class="c1 c11"><span class="c3"></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Once the application has been deployed to OpenShift, you should be able to see pod running: </span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 272.00px;"><img alt="" src="images/image31.png" style="width: 624.00px; height: 272.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">Under your running Pod, in the </span><span class="c3 c4">Detail</span><span class="c3">&nbsp;tab, click on </span><span class="c3 c4">connect</span><span class="c3">, this will take you to the console displaying current status of each Camel route. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 348.00px;"><img alt="" src="images/image43.png" style="width: 624.00px; height: 348.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">We have create a weight watcher service </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 168.00px;"><img alt="" src="images/image14.png" style="width: 624.00px; height: 168.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3">Expose your service:</span></p><p class="c2"><span class="c8 c6">$ oc expose svc weightwatcherapi</span></p><p class="c1"><span class="c8 c6"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 84.00px;"><img alt="" src="images/image33.png" style="width: 624.00px; height: 84.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c2 c21 c27" id="h.6uozprqacm40"><span></span></h2><h2 class="c2 c21" id="h.9uecv0kls3wn"><span>Running the Application</span></h2><h4 class="c2 c21" id="h.ql4pubdw4cah"><span>Registering a new Participants:</span></h4><p class="c2"><span class="c3">Before we start sending in weight, we need to register the participants and set their goal. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/addParticipant/2/ipavlov@behaviorist.org/75/84/70/78&amp;sa=D&amp;ust=1467308642261000&amp;usg=AFQjCNG8GPr_rbfPanP_b9h2tlHq8qO4eA">http://YOUREXPOSEDROUTE/weightwatcher/addParticipant/2/ipavlov@behaviorist.org/75/84/70/78</a></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 74.67px;"><img alt="" src="images/image08.png" style="width: 604.80px; height: 74.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h4 class="c2 c21" id="h.afyyq51z5s4u"><span>Events - Updating weight:</span></h4><p class="c2"><span class="c3">In a browser or any REST client app, trigger the event by updating the weight as we measure every-time. Each event will then pass into rule engine through our API. You should be able to see the calculated response from weight watcher. </span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-20%252007:15:00%2520EST/79&amp;sa=D&amp;ust=1467308642262000&amp;usg=AFQjCNGQPXq9UxFHl3zWERwLnk01LTB89g">http://</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/addParticipant/2/ipavlov@behaviorist.org/75/84/70/78&amp;sa=D&amp;ust=1467308642262000&amp;usg=AFQjCNHtaWQLCdbb-rSENbsXrR2h0KkdEw">YOUREXPOSEDROUTE</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-20%252007:15:00%2520EST/79&amp;sa=D&amp;ust=1467308642263000&amp;usg=AFQjCNF7m_kDCKnE7kusK8DVbPxCwuhJUA">/weightwatcher/updateweight/2/2015-04-20%2007:15:00%20EST/79</a></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-25%252007:15:00%2520EST/77&amp;sa=D&amp;ust=1467308642263000&amp;usg=AFQjCNFATfC_cxys7BtGpg6YO4QKWlbp5g">http://</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/addParticipant/2/ipavlov@behaviorist.org/75/84/70/78&amp;sa=D&amp;ust=1467308642264000&amp;usg=AFQjCNF15QWaxrZE1hnq2FubRgvu0kPtHg">YOUREXPOSEDROUTE</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-25%252007:15:00%2520EST/77&amp;sa=D&amp;ust=1467308642264000&amp;usg=AFQjCNECNADXSjBa7GpRMa6x6ckZkGR6Jg">/weightwatcher/updateweight/2/2015-04-25%2007:15:00%20EST/77</a></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-28%252007:15:00%2520EST/76&amp;sa=D&amp;ust=1467308642265000&amp;usg=AFQjCNGVI6tF6BnQo59ey5M_8whNuVzu1w">http://</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/addParticipant/2/ipavlov@behaviorist.org/75/84/70/78&amp;sa=D&amp;ust=1467308642265000&amp;usg=AFQjCNH7dPMhtI8T1a9DXZ-AbOzBakT4yg">YOUREXPOSEDROUTE</a></span><span class="c8 c17"><a class="c0" href="https://www.google.com/url?q=http://weightwatcherapi-demo.rhel-cdk.10.1.2.2.xip.io/weightwatcher/updateweight/2/2015-04-28%252007:15:00%2520EST/76&amp;sa=D&amp;ust=1467308642265000&amp;usg=AFQjCNGVI6tF6BnQo59ey5M_8whNuVzu1w">weightwatcher/updateweight/2/2015-04-28%2007:15:00%20EST/76</a></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.80px; height: 146.67px;"><img alt="" src="images/image27.png" style="width: 604.80px; height: 146.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c2 c21" id="h.uhnxf58pffnt"><span>Scaling up the application</span></h2><p class="c2"><span>As the weight watcher became more popular, more clients wants to join the program, we need to &nbsp;scale up our application to meet the demands, the very nature of Camel and OpenShift allows you do this with a few click of a button. </span></p><p class="c1"><span></span></p><p class="c2"><span>In the </span><span class="c4">overview</span><span>&nbsp;page, you should be able to see the exposed service, click on the </span><span class="c4">upper arrow</span><span>&nbsp;button to add one more pod running on OpenShift. </span></p><p class="c1"><span></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 228.00px;"><img alt="" src="images/image19.png" style="width: 624.00px; height: 228.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c3"></span></p><p class="c2"><span class="c3">And now you have two instance handling the event request. </span></p><p class="c1"><span class="c3"></span></p><h5 class="c2 c21" id="h.q20wgsbhh1xm"><span>Congratulation, you have completed the lab!</span></h5><div><p class="c2 c28"><span>&nbsp;/ </span></p></div></body></html>